# the definition of composed selections. Can contain as well TCut style selections, e.g.:
# resolved = baseline, btagMM, massCut
# resolvedHighPt = baseline, btagMM, massCut, dau1_pt > 150
# use comma separated lists
[selections]

### some selections with tes up/down
### note: jets are selected at skim level to have pt > 20
### so I am raising the pt value to 25 just to test the change in the acceptance

jetsVBFloose_nominal = isVBF && VBFjj_mass > 500 && VBFjj_deltaEta > 3, btagMfirst
jetsVBFloose_jesUp = isVBF && VBFjj_mass_jetup > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetup > 30, btagMfirst
jetsVBFloose_jesDown = isVBF && VBFjj_mass_jetdown > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetdown > 30, btagMfirst

noVBFloose_nominal = !(isVBF && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)
noVBFloose_jesUp = !(isVBF && VBFjj_mass_jetup > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetup > 30 && bjet1_bID_deepCSV > 0.4941)
noVBFloose_jesDown = !(isVBF && VBFjj_mass_jetdown > 500 && VBFjj_deltaEta > 3 && VBFjet2_pt_jetdown > 30 && bjet1_bID_deepCSV > 0.4941)


baseline_nominal     = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && isVBFtrigger == 0 && bjet1_pt_raw > 25 && bjet2_pt_raw > 25

baseline_tesUp       = pairType == 2 && dau1_pt_tauup > 40   && abs (dau1_eta) < 2.1 && dau2_pt_tauup > 40   && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw > 25         && bjet2_pt_raw > 25 && isVBFtrigger == 0
baseline_tesDown     = pairType == 2 && dau1_pt_taudown > 40 && abs (dau1_eta) < 2.1 && dau2_pt_taudown > 40 && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw > 25         && bjet2_pt_raw > 25 && isVBFtrigger == 0
baseline_jesUp       = pairType == 2 && dau1_pt > 40         && abs (dau1_eta) < 2.1 && dau2_pt > 40         && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw_jetup > 25   && bjet2_pt_raw_jetup > 25 && isVBFtrigger == 0
baseline_jesDown     = pairType == 2 && dau1_pt > 40         && abs (dau1_eta) < 2.1 && dau2_pt > 40         && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw_jetdown > 25 && bjet2_pt_raw_jetdown > 25 && isVBFtrigger == 0

ellypsMassCut_tesUp    = ((tauH_SVFIT_mass_up-116.)*(tauH_SVFIT_mass_up-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown  = ((tauH_SVFIT_mass_down-116.)*(tauH_SVFIT_mass_down-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_jesUp    = ((tauH_SVFIT_mass_METup-116.)*(tauH_SVFIT_mass_METup-116.))/(35.*35.) + ((bH_mass_raw_jetup-111.)*(bH_mass_raw_jetup-111.))/(45.*45.) <  1.0
ellypsMassCut_jesDown  = ((tauH_SVFIT_mass_METdown-116.)*(tauH_SVFIT_mass_METdown-116.))/(35.*35.) + ((bH_mass_raw_jetdown-111.)*(bH_mass_raw_jetdown-111.))/(45.*45.) <  1.0

s1b1jresolvedMcut_nominal = baseline_nominal , btagM, isBoosted != 1 , ellypsMassCut, noVBFloose_nominal
s2b0jresolvedMcut_nominal = baseline_nominal , btagMM, isBoosted != 1 , ellypsMassCut, noVBFloose_nominal
sboostedLLMcut_nominal    = baseline_nominal , btagLL, isBoosted == 1 , boostMassCut, noVBFloose_nominal
VBFloose_nominal = baseline_nominal, btagMfirst, jetsVBFloose_nominal, tauH_SVFIT_mass > 50


s1b1jresolvedMcut_tesUp   = baseline_tesUp , btagM, isBoosted != 1 , ellypsMassCut_tesUp, noVBFloose_nominal
s2b0jresolvedMcut_tesUp   = baseline_tesUp , btagMM, isBoosted != 1 , ellypsMassCut_tesUp, noVBFloose_nominal
sboostedLLMcut_tesUp      = baseline_tesUp , btagLL, isBoosted == 1 , boostMassCut, noVBFloose_nominal
VBFloose_tesUp = baseline_tesUp, btagMfirst, jetsVBFloose_nominal, tauH_SVFIT_mass_up > 50

s1b1jresolvedMcut_tesDown = baseline_tesDown , btagM, isBoosted != 1 , ellypsMassCut_tesDown, noVBFloose_nominal
s2b0jresolvedMcut_tesDown = baseline_tesDown , btagMM, isBoosted != 1 , ellypsMassCut_tesDown, noVBFloose_nominal
sboostedLLMcut_tesDown    = baseline_tesDown , btagLL, isBoosted == 1 , boostMassCut, noVBFloose_nominal
VBFloose_tesDown = baseline_tesDown, btagMfirst, jetsVBFloose_nominal, tauH_SVFIT_mass_down > 50

s1b1jresolvedMcut_jesUp   = baseline_jesUp , btagM, isBoosted != 1 , ellypsMassCut_jesUp, noVBFloose_jesUp
s2b0jresolvedMcut_jesUp   = baseline_jesUp , btagMM, isBoosted != 1 , ellypsMassCut_jesUp , noVBFloose_jesUp
sboostedLLMcut_jesUp      = baseline_jesUp , btagLL, isBoosted == 1 , boostMassCut, noVBFloose_jesUp
VBFloose_jesUp = baseline_jesUp, btagMfirst, jetsVBFloose_jesUp, tauH_SVFIT_mass_METup > 50

s1b1jresolvedMcut_jesDown = baseline_jesDown , btagM, isBoosted != 1 , ellypsMassCut_jesDown, noVBFloose_jesDown
s2b0jresolvedMcut_jesDown = baseline_jesDown , btagMM, isBoosted != 1 , ellypsMassCut_jesDown, noVBFloose_jesDown
sboostedLLMcut_jesDown    = baseline_jesDown , btagLL, isBoosted == 1 , boostMassCut, noVBFloose_jesDown
VBFloose_jesDown = baseline_jesDown, btagMfirst, jetsVBFloose_jesDown, tauH_SVFIT_mass_METdown > 50


baselineVBFtight_nominal     = pairType == 2 && dau1_pt > 25 && abs (dau1_eta) < 2.1 && dau2_pt > 25 && tauH_SVFIT_mass > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && bjet1_pt_raw > 25 && bjet2_pt_raw > 25 && isVBFtrigger == 1 && VBFjj_mass > 800 && VBFjet1_pt > 140 && VBFjet2_pt > 60

baselineVBFtight_tesUp       = pairType == 2 && dau1_pt_tauup > 25 && abs (dau1_eta) < 2.1 && dau2_pt_tauup > 25 && tauH_SVFIT_mass_up > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && bjet1_pt_raw > 25 && bjet2_pt_raw > 25 && isVBFtrigger == 1 && VBFjj_mass > 800 && VBFjet1_pt > 140 && VBFjet2_pt > 60
baselineVBFtight_tesDown       = pairType == 2 && dau1_pt_taudown > 25 && abs (dau1_eta) < 2.1 && dau2_pt_taudown > 25 && tauH_SVFIT_mass_down > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && bjet1_pt_raw > 25 && bjet2_pt_raw > 25 && isVBFtrigger == 1 && VBFjj_mass > 800 && VBFjet1_pt > 140 && VBFjet2_pt > 60
baselineVBFtight_jesUp       = pairType == 2 && dau1_pt > 25 && abs (dau1_eta) < 2.1 && dau2_pt > 25 && tauH_SVFIT_mass > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && bjet1_pt_raw_jetup > 25 && bjet2_pt_raw_jetup > 25 && isVBFtrigger == 1 && VBFjj_mass_jetup > 800 && VBFjet1_pt_jetup > 140 && VBFjet2_pt_jetup > 60
baselineVBFtight_jesDown       = pairType == 2 && dau1_pt > 25 && abs (dau1_eta) < 2.1 && dau2_pt > 25 && tauH_SVFIT_mass > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && bjet1_pt_raw_jetdown > 25 && bjet2_pt_raw_jetdown > 25 && isVBFtrigger == 1 && VBFjj_mass_jetdown > 800 && VBFjet1_pt_jetdown > 140 && VBFjet2_pt_jetdown > 60

VBFtight_nominal = baselineVBFtight_nominal, btagMfirst
VBFtight_tesUp = baselineVBFtight_tesUp, btagMfirst
VBFtight_tesDown = baselineVBFtight_tesDown, btagMfirst
VBFtight_jesUp = baselineVBFtight_jesUp, btagMfirst
VBFtight_jesDown = baselineVBFtight_jesDown, btagMfirst



#baseline
baseline     = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && isVBFtrigger == 0
baselineVBFtight     = pairType == 2 && dau1_pt > 25 && abs (dau1_eta) < 2.1 && dau2_pt > 25 && tauH_SVFIT_mass > 50 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1 && isVBFtrigger == 1 && VBFjj_mass > 800 && VBFjet1_pt > 140 && VBFjet2_pt > 60
#DY sample has Mll > 50 GeV -> look at selection with tauH_mass > 55 GeV
baseline55     = baseline, tauH_SVFIT_mass > 50
baselineVBFloose     = baseline, isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3
baselineVBF_btagMfirst    = baseline55, isVBF == 1, btagMfirst

ditau35_tight = ((isMC && (pass_triggerbit & (1 << 4))) || (!isMC && (pass_triggerbit & (1 << 3))))
ditau40_tight = ((isMC && (pass_triggerbit & (1 << 5))) || (!isMC && (pass_triggerbit & (1 << 4))))
ditau40 = ((isMC && (pass_triggerbit & (1 << 6))) || (!isMC && (pass_triggerbit & (1 << 5))))

#baseline inclusive HTT (no additional jets requirement, only tautau pair)
baselineHTauTau     = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && isVBFtrigger == 0
baselineHTauTauVBFloose     = baselineHTauTau55, isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3

baselineHTauTau55     = baselineHTauTau, tauH_mass > 55

baselineHTauTau_ditau35_tight = baselineHTauTau55, ditau35_tight
baselineHTauTau_ditau40_tight = baselineHTauTau55, ditau40_tight
baselineHTauTau_ditau40 = baselineHTauTau55, ditau40

baseline_ditau35_tight = baseline55, ditau35_tight
baseline_ditau40_tight = baseline55, ditau40_tight
baseline_ditau40       = baseline55, ditau40



#splitting for different decay modes
baselineHTauTau_tau1_1Pr_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 0
baselineHTauTau_tau1_1Pr_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 1
baselineHTauTau_tau1_1Pr_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 10

baselineHTauTau_tau1_1PrPi0_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 0
baselineHTauTau_tau1_1PrPi0_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 1
baselineHTauTau_tau1_1PrPi0_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 10

baselineHTauTau_tau1_3Pr_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 0
baselineHTauTau_tau1_3Pr_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 1
baselineHTauTau_tau1_3Pr_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_both1Pr    = baselineHTauTau55, dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_both1PrPi0 = baselineHTauTau55, dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_both3Pr    = baselineHTauTau55, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_1Pr    = baselineHTauTau55,  dau2_decayMode == 0
baselineHTauTau_1PrPi0 = baselineHTauTau55,  dau2_decayMode == 1
baselineHTauTau_3Pr    = baselineHTauTau55,  dau2_decayMode == 10


# region DY enriched, splitted in different decay modes

DYenriched = ditau_deltaR < 2


baseline_DY = baseline55, DYenriched
baselineHTauTau_DY        = baselineHTauTau,  DYenriched
baselineHTauTau_1Pr_DY    = baselineHTauTau,  dau2_decayMode == 0 , DYenriched
baselineHTauTau_1PrPi0_DY = baselineHTauTau,  dau2_decayMode == 1 , DYenriched
baselineHTauTau_3Pr_DY    = baselineHTauTau,  dau2_decayMode == 10, DYenriched

baselineHTauTau_both1Pr_DY    = baselineHTauTau, DYenriched,dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_both1PrPi0_DY = baselineHTauTau, DYenriched,dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_both3Pr_DY    = baselineHTauTau, DYenriched,dau1_decayMode == 10 && dau2_decayMode == 10




# btag requirements - DeepCSV
#btagL        = bjet1_bID_deepCSV > 0.1522 && bjet2_bID_deepCSV < 0.1522 #only 1 jet with loose btag working point
#btagM        = bjet1_bID_deepCSV > 0.4941 && bjet2_bID_deepCSV < 0.4941 #only 1 jet with medium btag working point
#btagMfirst   = bjet1_bID_deepCSV > 0.4941                               #at least 1 jet with medium btag working point
#btagLL       = bjet1_bID_deepCSV > 0.1522 && bjet2_bID_deepCSV > 0.1522 #both jets with loose btag working point
#btagMM       = bjet1_bID_deepCSV > 0.4941 && bjet2_bID_deepCSV > 0.4941 #both jets with medium btag working point
#nobtagMM     = bjet1_bID_deepCSV < 0.4941 && bjet2_bID_deepCSV < 0.4941 #both jets NOT btagged (medium working point)

# btag requirements - DeepFlavor WPs={0.0614, 0.3093, 0.7221}; // L,M,T -- Legacy 2016 DeepFlavor
btagL        = bjet1_bID_deepFlavor > 0.0614 && bjet2_bID_deepFlavor < 0.0614 #only 1 jet with loose btag working point
btagM        = bjet1_bID_deepFlavor > 0.3093 && bjet2_bID_deepFlavor < 0.3093 #only 1 jet with medium btag working point
btagMfirst   = bjet1_bID_deepFlavor > 0.3093                                  #at least 1 jet with medium btag working point
btagLL       = bjet1_bID_deepFlavor > 0.0614 && bjet2_bID_deepFlavor > 0.0614 #both jets with loose btag working point
btagMM       = bjet1_bID_deepFlavor > 0.3093 && bjet2_bID_deepFlavor > 0.3093 #both jets with medium btag working point
nobtagMM     = bjet1_bID_deepFlavor < 0.3093 && bjet2_bID_deepFlavor < 0.3093 #both jets NOT btagged (medium working point)


massCut      = bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160
massCutCent  = tauH_SVFIT_mass > 79.5 && tauH_SVFIT_mass < 152.5 && bH_mass_raw > 74.5 && bH_mass_raw < 147.5
boostMassCut = tauH_SVFIT_mass > 79.5 && tauH_SVFIT_mass < 152.5 && fatjet_softdropMass > 90 && fatjet_softdropMass < 160
ellypsMassCut  = ((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0 # mass cut centered on the Hbb Htt masses, applied in the final selections
circMassCut  = TMath::Sqrt((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.) + (bH_mass_raw-111.)*(bH_mass_raw-111.)) <  40.0
massCutHbb = bH_mass_raw > 66 && bH_mass_raw < 156
massCutHtt = tauH_SVFIT_mass > 81 && tauH_SVFIT_mass < 151

# ABCD regions used in the analysis - MVA2017v2
#SR           = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 3                         # signal region: opposite sign, isolated taus
#SStight      = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 3			       # B region
#OSrlx        = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1
#SSrlx        = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1			       # B' region
#OSinviso     = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 3   # C region
#SSinviso     = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 3   # D region

# ABCD regions used in the analysis - DeepTau
SR           = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 5                   # signal region: opposite sign, isolated taus
SStight      = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 5			       # B region
OSrlx        = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2
SSrlx        = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2			       # B' region
OSinviso     = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2 && dau2_deepTauVsJet < 5   # C region
SSinviso     = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2 && dau2_deepTauVsJet < 5   # D region

#QCD enriched
QCDenriched = baseline, nobtagMM, ditau_deltaR > 2, tauH_mass > 55 # mass cut to avoid residual disagreement

baselineMcutBB = baseline55, massCutHbb
baselineMcutTT = baseline55, massCutHtt

# for ABCD with vtight isolation requirement instead of medium
SRVTight =isOS != 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 5
SSrlxVTight = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 3
SStightVTight      = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 5
OSinvisoVTight     = isOS != 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 5
SSinvisoVTight     = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 5

# for ABCD with tight isolation requirement instead of medium
SRTight           =isOS != 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 4
SSrlxTight        = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 2
SStightTight      = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 4
OSinvisoTight     = isOS != 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 4
SSinvisoTight     = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 4


# baseline + Mass cut
baselineMcut = baseline, ellypsMassCut

# baseline by number of btagged jets
s1b1j        = baseline , btagM
s2b0j        = baseline , btagMM
s0b2j        = baseline , nobtagMM



# split resolved and boosted categories
s1b1jresolved = baseline , btagM , isBoosted != 1 #, !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)
s2b0jresolved = baseline , btagMM, isBoosted != 1 #, !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)
sboostedLL    = baseline , btagLL, isBoosted == 1 #, !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)

# final categories
s1b1jresolvedMcut = baseline , btagM, isBoosted != 1 , ellypsMassCut, !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)
s2b0jresolvedMcut = baseline , btagMM, isBoosted != 1 , ellypsMassCut , !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)
sboostedLLMcut       = baseline , btagLL, isBoosted == 1 , boostMassCut, !(isVBF == 1 && VBFjj_mass > 500 && VBFjj_deltaEta > 3 && bjet1_bID_deepCSV > 0.4941)

#final categories 2016
s1b1jresolvedMcut_incl = baseline , btagM, isBoosted != 1 , ellypsMassCut
s2b0jresolvedMcut_incl = baseline , btagMM, isBoosted != 1 , ellypsMassCut
sboostedLLMcut_incl = baseline , btagLL, isBoosted == 1 , boostMassCut


baseline55Mcut = baseline55, ellypsMassCut
baselineHTauTau55Mcut = baselineHTauTau55, ellypsMassCut

# some tests for VBF cateogory

VBFloose = baselineVBFloose, btagMfirst
VBFlooseMcut = VBFloose, ellypsMassCut
VBFtight = baselineVBFtight, btagMfirst


#########################################################################
#########################################################################

## weights to be applied for a certain selections when calling Fill()
## multiple weights are passed as list and are multiplied together
## NOTE: no weight is applied for data (the simple Fill() is used)
[selectionWeights]
#baseline         = MC_weight, PUReweight, L1pref_weight, trigSF, IdAndIsoAndFakeSF_deep, DYscale_MTT
baseline         = MC_weight, PUReweight, L1pref_weight, trigSF, FakeRateSF_deep, DYscale_MTT
baselineHTauTau  = MC_weight, PUReweight, L1pref_weight, trigSF, IdAndIsoAndFakeSF_deep
baselineVBFtight  = MC_weight, PUReweight, L1pref_weight, trigSF, IdAndIsoAndFakeSF_deep, VBFtrigNorm, VBFtrigSFjet, VBFtrigSFtau

# remove DY weights, they are already taken into account in baseline weights
btagLL   = bTagweightL
btagMM   = bTagweightM
nobtagMM = bTagweightM
btagL    = bTagweightL
btagM    = bTagweightM
btagMfirst    = bTagweightM

[selectionWeights_ext] # beta feature! use with care!
#weights decay mode dependent computed with QCD backgrond estimation, DY LO weights, old DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #11 Mar 2019 #used for testing, already saved in the skims
#baseline = (dau1_decayMode == 0 && isTau1real): 0.97, (dau2_decayMode == 0 && isTau2real): 0.97, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.90, (dau2_decayMode == 10 && isTau2real): 0.90
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 0.97, (dau2_decayMode == 0 && isTau2real): 0.97, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.90, (dau2_decayMode == 10 && isTau2real): 0.90

#weights decay mode dependent computed with QCD backgrond + fakeTaus estimation, DY LO weights, old DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #11 Mar 2019
#baseline = (dau1_decayMode == 0 && isTau1real): 1.05, (dau2_decayMode == 0 && isTau2real): 1.05, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.88, (dau2_decayMode == 10 && isTau2real): 0.88
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 1.05, (dau2_decayMode == 0 && isTau2real): 1.05, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.88, (dau2_decayMode == 10 && isTau2real): 0.88

#weights decay mode dependent computed with QCD backgrond estimation, DY NLO weights, Pisa`s DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #30 Apr 2019
#baseline = (dau1_decayMode == 0 && isTau1real): 1.12, (dau2_decayMode == 0 && isTau2real): 1.12, (dau1_decayMode == 1 && isTau1real): 1.06, (dau2_decayMode == 1 && isTau2real): 1.06, (dau1_decayMode == 10 && isTau1real): 0.87, (dau2_decayMode == 10 && isTau2real): 0.87
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 1.12, (dau2_decayMode == 0 && isTau2real): 1.12, (dau1_decayMode == 1 && isTau1real): 1.06, (dau2_decayMode == 1 && isTau2real): 1.06, (dau1_decayMode == 10 && isTau1real): 0.87, (dau2_decayMode == 10 && isTau2real): 0.87

#weights decay mode dependent computed with QCD backgrond estimation, DY LO weights, Pisa`s DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #30 Apr 2019
#baseline = (dau1_decayMode == 0 && isTau1real && DYLOtoNLOreweight > -1): 1.02, (dau2_decayMode == 0 && isTau2real && DYLOtoNLOreweight > -1): 1.02, (dau1_decayMode == 1 && isTau1real&& DYLOtoNLOreweight > -1): 1.09, (dau2_decayMode == 1 && isTau2real && DYLOtoNLOreweight > -1): 1.09, (dau1_decayMode == 10 && isTau1real && DYLOtoNLOreweight > -1): 0.93, (dau2_decayMode == 10 && isTau2real && DYLOtoNLOreweight > -1): 0.93
#baselineHTauTau =(dau1_decayMode == 0 && isTau1real && DYLOtoNLOreweight > -1): 1.02, (dau2_decayMode == 0 && isTau2real && DYLOtoNLOreweight > -1): 1.02, (dau1_decayMode == 1 && isTau1real && DYLOtoNLOreweight > -1): 1.09, (dau2_decayMode == 1 && isTau2real && DYLOtoNLOreweight > -1): 1.09, (dau1_decayMode == 10 && isTau1real && DYLOtoNLOreweight > -1): 0.93, (dau2_decayMode == 10 && isTau2real && DYLOtoNLOreweight > -1): 0.93

#baseline = (dau1_decayMode == 0 && isTau1real ): 1.02, (dau2_decayMode == 0 && isTau2real ): 1.02, (dau1_decayMode == 1 && isTau1real): 1.09, (dau2_decayMode == 1 && isTau2real ): 1.09, (dau1_decayMode == 10 && isTau1real ): 0.93, (dau2_decayMode == 10 && isTau2real ): 0.93
#baselineHTauTau =(dau1_decayMode == 0 && isTau1real ): 1.02, (dau2_decayMode == 0 && isTau2real ): 1.02, (dau1_decayMode == 1 && isTau1real ): 1.09, (dau2_decayMode == 1 && isTau2real ): 1.09, (dau1_decayMode == 10 && isTau1real ): 0.93, (dau2_decayMode == 10 && isTau2real ): 0.93

#baselineHTauTauVBFtight =(dau1_decayMode == 0 && isTau1real ): 1.02, (dau2_decayMode == 0 && isTau2real ): 1.02, (dau1_decayMode == 1 && isTau1real ): 1.09, (dau2_decayMode == 1 && isTau2real ): 1.09, (dau1_decayMode == 10 && isTau1real ): 0.93, (dau2_decayMode == 10 && isTau2real ): 0.93
#baselineVBFtight =(dau1_decayMode == 0 && isTau1real ): 1.02, (dau2_decayMode == 0 && isTau2real ): 1.02, (dau1_decayMode == 1 && isTau1real ): 1.09, (dau2_decayMode == 1 && isTau2real ): 1.09, (dau1_decayMode == 10 && isTau1real ): 0.93, (dau2_decayMode == 10 && isTau2real ): 0.93

# Legacy2016 - Feb2020
#baseline = (dau1_decayMode == 0 && isTau1real ): 1.060, (dau2_decayMode == 0 && isTau2real ): 1.060, (dau1_decayMode == 1 && isTau1real): 0.928, (dau2_decayMode == 1 && isTau2real ): 0.928, (dau1_decayMode == 10 && isTau1real ): 0.931, (dau2_decayMode == 10 && isTau2real ): 0.931

# Legacy2016 - May2020
baseline = (dau1_decayMode == 0 && isTau1real ): 0.975, (dau2_decayMode == 0 && isTau2real ): 0.975, (dau1_decayMode == 1 && isTau1real): 0.979, (dau2_decayMode == 1 && isTau2real ): 0.979, (dau1_decayMode == 10 && isTau1real ): 1.017, (dau2_decayMode == 10 && isTau2real ): 1.017, (dau1_decayMode == 11 && isTau1real ): 1.206, (dau2_decayMode == 11 && isTau2real ): 1.206


#########################################################################
#########################################################################

[sampleWeights]
TTfullyHad = TTtopPtreweight#, IdAndIsoSF
TTfullyLep = TTtopPtreweight#, IdAndIsoSF
TTsemiLep  = TTtopPtreweight#, IdAndIsoSF
#DY = DYLOtoNLOreweight


#########################################################################
#########################################################################


# define alternative weights to be tested instead of the nominal one
[systematics]
TTtopPtreweight  = topUp:TTtopPtreweight_up , topDown:TTtopPtreweight_down
# trigSF         = trigUP:trigSF_up , trigDOWN:trigSF_down
# turnOnreweight = rewUP:turnOnreweight_tauup, rewDO:turnOnreweight_taudown

#########################################################################
#########################################################################

# ROOT-like definition of the binning
[histos]

BDToutSM_kl_1            = 1000000,-1,1
DNNoutSM_kl_1            = 500000,0,1
